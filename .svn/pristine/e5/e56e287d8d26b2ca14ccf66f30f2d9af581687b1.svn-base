define(["app/tool"],function(a){var b=function(){var b=!0,c=function(){var b,c=function(){return window.location.host=="beta.test2.surepush.cn"?"test.appstore.lps.lenovo.com":"appstore.lps.lenovo.com"}();return global&&typeof global.getLpsUst!="undefined"?parseInt(global.getVersionCode())<61e3?b=global.getLpsUst(0):b=global.getLpsUst(c,0):(b=a.cookie.get("lpsust"),b=="null"&&(b="")),typeof b=="undefined"?"":b},d=function(a){},e=function(){$.get("../loginInfo.do?t="+(new Date).getTime(),function(a){return a.status==0?(f(),!1):!0})},f=function(a){if(global)b==1&&(b=!1,setTimeout(function(){b=!0;if(typeof global.getLpsUst=="undefined")return!1;global.showLogin();var a=null;typeof global.getLpsUst!="undefined"?a=setInterval(function(){c()!=""&&(clearInterval(a),e())},500):c()!=""&&e()},500));else{var d=function(){var a=window.location.pathname;while(a.indexOf("/")>-1)a=a.substring(a.indexOf("/")+1,a.length);return a}();window.location.href="lenovoLogin.do?toPath=/"+d}};return{login:f,checkLogin:e}}();return b})