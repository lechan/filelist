<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
*{ margin:0px; padding:0px;}
html,body{ width:100%;}
body{ background:#000;}
.wrap{ width:1280px; height:800px; overflow:hidden; margin:0 auto; background:url(images/loading.gif) no-repeat center; visibility:hidden;}
.list{ width:100%;}
.list li{ line-height:30px; font-size:18px; color:#fff; cursor:pointer;}
.list li:hover{ text-decoration:underline;}
</style>
</head>

<body>
<div class="wrap" id="wrap"><img id="showPic" style="display:none;" /></div>
<ul class="list">
	<li onClick="animeFrame('http://middle-earth.thehobbit.com/assets/images/highres/rivendell-title/rivendell-title-',54);">animation1</li>
    <li onClick="animeFrame('http://middle-earth.thehobbit.com/assets/images/highres/dolguldur-ghost/dolguldur-ghost-',57);">animation2</li>
    <li onClick="animeFrame('http://middle-earth.thehobbit.com/assets/images/highres/thranduils-title/thranduils-title-',43);">animation3</li>
</ul>
<script type="text/javascript">
//http://middle-earth.thehobbit.com/assets/images/highres/rivendell-title/rivendell-title-054.jpg
//http://middle-earth.thehobbit.com/assets/images/highres/dolguldur-ghost/dolguldur-ghost-057.jpg
//http://middle-earth.thehobbit.com/assets/images/highres/thranduils-title/thranduils-title-043.jpg
var animeFrame = function(path,maxNum){
	document.getElementById('wrap').style.visibility = 'visible';
	document.getElementById('showPic').style.display = 'none';
	var count = 0;
	var timer = null;
	for(var i=0;i<maxNum;i++){
		var oImg = new Image();
		oImg.src = path + formatNum(i) + '.jpg';
		oImg.onload = function(){
			count++;
		}	
	}
	
	timer = setInterval(function(){
		if(count==maxNum){
			clearInterval(timer);
			showbox();	
		}
	},200);
	
	function formatNum(num){
		if(num<10){
			return '00' + num;	
		}else{
			return '0' + num;	
		}
	}
	
	function showbox(){
		var showPic = document.getElementById('showPic');
		var num = 1;
		var timer2 = null;
		showPic.style.display = 'block';
		clearInterval(timer2);
		timer2 = setInterval(function(){
			if(num==maxNum){
				clearInterval(timer2);	
			}else{
				num++;	
			}
			showPic.src = path + formatNum(num) + '.jpg';
			num++;
		},100);
	}
}



</script>
</body>
</html>
